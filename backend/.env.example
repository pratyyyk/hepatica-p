DATABASE_URL=sqlite:///./hepatica.db
AWS_REGION=us-east-1
S3_UPLOAD_BUCKET=hepatica-scans
S3_REPORT_BUCKET=hepatica-reports

ENVIRONMENT=development
AUTH_MODE=bff
AUTH_PROVIDER=firebase
ENABLE_DEV_AUTH=true
AUTH_DISABLED=false

# Firebase auth (default)
FIREBASE_PROJECT_ID=
FIREBASE_WEB_API_KEY=
FIREBASE_JWKS_URL=https://www.googleapis.com/service_accounts/v1/jwk/securetoken@system.gserviceaccount.com

# Cognito auth (legacy optional)
COGNITO_USER_POOL_ID=
COGNITO_CLIENT_ID=
COGNITO_REGION=us-east-1
COGNITO_DOMAIN=
OAUTH_REDIRECT_URI=http://localhost:8000/api/v1/auth/callback
OAUTH_LOGOUT_REDIRECT_URI=http://localhost:3000
FRONTEND_REDIRECT_URI=http://localhost:3000

SESSION_TTL_MINUTES=480
SESSION_COOKIE_NAME=hp_session
CSRF_COOKIE_NAME=hp_csrf
CSRF_HEADER_NAME=x-csrf-token
LOGIN_CONTEXT_COOKIE_NAME=hp_login_ctx
# Non-dev guardrail: must be a non-default secret with at least 32 characters.
SESSION_ENCRYPTION_KEY=replace-with-strong-session-key

CORS_ALLOWED_ORIGINS=http://localhost:3000
RATE_LIMIT_AUTH_PER_MINUTE=20/minute
RATE_LIMIT_MUTATING_PER_USER=60/minute
RATE_LIMIT_MUTATING_PER_IP=120/minute
RATE_LIMIT_READ_PER_USER=180/minute

STAGE1_ML_ENABLED=true
STAGE1_REQUIRE_MODEL_NON_DEV=true
STAGE1_REGISTRY_MODEL_NAME=clinical-stage1-gbdt
STAGE1_MODEL_ARTIFACT_DIR=../ml/artifacts/stage1
STAGE2_REQUIRE_MODEL_NON_DEV=true
STAGE2_REGISTRY_MODEL_NAME=fibrosis-efficientnet-b3
# Stage 2 image quality gate:
# - auto: warn in development, strict otherwise
# - strict: reject bad images with 422
# - warn: allow inference but record quality reason codes
# - off: disable checks entirely
STAGE2_QUALITY_GATE=auto

BEDROCK_EMBEDDING_MODEL_ID=amazon.titan-embed-text-v2:0
JOURNALS_PATH=/Users/praty/journals
LOCAL_IMAGE_ROOT=../data/Images
MODEL_ARTIFACT_PATH=../ml/artifacts/fibrosis_model.pt
TEMPERATURE_ARTIFACT_PATH=../ml/artifacts/temperature_scaling.json
MAX_UPLOAD_BYTES=26214400
PRESIGNED_EXPIRATION_SECONDS=900

# Upload behavior: auto=local in development, s3 otherwise.
UPLOAD_MODE=auto
# Optional override for where local uploads + PDFs are stored.
LOCAL_STORAGE_DIR=../backend/artifacts
